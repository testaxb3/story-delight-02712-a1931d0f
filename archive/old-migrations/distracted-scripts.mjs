import { createClient } from '@supabase/supabase-js';

const SUPABASE_URL = 'https://iogceaotdodvugrmogpp.supabase.co';
const SERVICE_ROLE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlvZ2NlYW90ZG9kdnVncm1vZ3BwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MDg4NzA4NCwiZXhwIjoyMDc2NDYzMDg0fQ.UBWhZUiQY0CklVKJonHbnjQRX51PvBaQDKy6-66Q-jU';

const supabase = createClient(SUPABASE_URL, SERVICE_ROLE_KEY);

const distractedScripts = [
  // ========== BEDTIME (need 3 more) ==========
  {
    title: 'Bedtime Steps Overload',
    category: 'Bedtime',
    wrong_way: '"Get ready for bed! Brush teeth, put on pajamas, and get in bed NOW!"',
    phrase_1: 'Too many bedtime things.',
    phrase_1_action: 'Stand in bathroom doorway. Calm face. Make eye contact.',
    phrase_2: 'You want to do it right, AND your brain can only hold one thing.',
    phrase_2_action: 'Point to toothbrush only. Hide pajamas from view for now.',
    phrase_3: 'Just teeth first. I\'ll tell you next when teeth are done.',
    phrase_3_action: 'Stay with them. When teeth done, THEN say: "Now pajamas." One at a time.',
    neurological_tip: 'DISTRACTED brains cannot hold multi-step sequences. "Get ready for bed" = 5+ steps their working memory drops. ONE instruction + physical presence = prevents shutdown.',
    profile: 'DISTRACTED',
    tags: ['bedtime', 'routine', 'multi-step', 'working memory', 'overwhelm', 'adhd'],
    situation_trigger: 'When child is frozen at bedtime because the routine feels like too many steps',
    location_type: ['home', 'bedroom', 'bathroom'],
    time_optimal: ['evening'],
    intensity_level: 'moderate',
    success_speed: '2min',
    parent_state: ['exhausted', 'rushed', 'frustrated'],
    age_min: 4,
    age_max: 12,
    backup_plan: 'Do it WITH them. Hand them toothbrush. Walk to bedroom together. Hand them pajama shirt. Physical scaffolding = external executive function.',
    common_mistakes: ['Listing all steps at once (working memory overload)', 'Leaving them alone to "do it themselves" (they will freeze)', 'Getting angry they forgot step 3 (they genuinely don\'t remember)', 'Expecting routine to stick after one week (takes months of support)'],
    pause_after_phrase_1: 3,
    pause_after_phrase_2: 2,
    expected_time_seconds: 120,
    requires_preparation: false,
    works_in_public: false,
    emergency_suitable: false
  },
  {
    title: 'Bedtime Noise Overload',
    category: 'Bedtime',
    wrong_way: '"Just ignore the noise and GO TO SLEEP! You\'re fine!"',
    phrase_1: 'Too much noise.',
    phrase_1_action: 'Sit on edge of bed. Acknowledge the real sensory input.',
    phrase_2: 'You hear everything loud, AND we can make it quieter.',
    phrase_2_action: 'Offer headphones or white noise machine. Turn it on.',
    phrase_3: 'Cover your ears or use this sound. Pick what helps.',
    phrase_3_action: 'Let them choose. Start white noise or give headphones. Dim lights. Leave.',
    neurological_tip: 'DISTRACTED kids have sensory filtering issues - they hear EVERYTHING and can\'t tune it out. White noise = constant input that masks unpredictable sounds. Headphones = control.',
    profile: 'DISTRACTED',
    tags: ['bedtime', 'noise', 'sensory', 'overstimulation', 'sleep', 'adhd'],
    situation_trigger: 'When child can\'t sleep because they hear every little noise and it keeps them awake',
    location_type: ['home', 'bedroom'],
    time_optimal: ['evening'],
    intensity_level: 'mild',
    success_speed: '1min',
    parent_state: ['exhausted', 'frustrated', 'desperate for them to sleep'],
    age_min: 4,
    age_max: 14,
    backup_plan: 'Download white noise app. Play ocean sounds or rain. Say: "This covers the other sounds. Close your eyes." Leave room.',
    common_mistakes: ['Saying "there\'s no noise" (they genuinely hear more than you)', 'Getting frustrated they can\'t "just ignore it" (neurologically impossible)', 'Forcing silence (unpredictable sounds are worse than constant noise)', 'Leaving them to struggle alone (they need the accommodation)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 2,
    expected_time_seconds: 60,
    requires_preparation: true,
    works_in_public: false,
    emergency_suitable: false
  },
  {
    title: 'Bedtime Brain Still Racing',
    category: 'Bedtime',
    wrong_way: '"Stop thinking and just SLEEP! Close your eyes and relax!"',
    phrase_1: 'Brain won\'t turn off.',
    phrase_1_action: 'Sit on bed. Calm voice. Acknowledge the real problem.',
    phrase_2: 'You want to sleep, AND your thoughts keep going.',
    phrase_2_action: 'Offer paper and pencil. Or audiobook. Something to catch the thoughts.',
    phrase_3: 'Write it down or listen to a story. Brain needs a job.',
    phrase_3_action: 'Give them the tool. Stay for 2 minutes. Then leave. Let the tool do the work.',
    neurological_tip: 'DISTRACTED brains have poor thought inhibition - they can\'t "stop thinking." Writing externalizes thoughts. Audiobook gives brain something to follow instead of racing. Fighting thoughts = more thoughts.',
    profile: 'DISTRACTED',
    tags: ['bedtime', 'racing thoughts', 'sleep', 'adhd', 'anxiety', 'brain won\'t stop'],
    situation_trigger: 'When child is lying awake because their brain won\'t stop thinking and they can\'t fall asleep',
    location_type: ['home', 'bedroom'],
    time_optimal: ['evening'],
    intensity_level: 'moderate',
    success_speed: '3min',
    parent_state: ['exhausted', 'frustrated', 'worried'],
    age_min: 6,
    age_max: 16,
    backup_plan: 'Say: "Count backwards from 100. Every number, take a breath." Or: "List every animal you can think of." Give brain a boring task.',
    common_mistakes: ['Saying "just don\'t think about it" (impossible)', 'Getting frustrated they\'re still awake (increases anxiety)', 'No tool to redirect thoughts (brain needs external focus)', 'Engaging in conversation about the thoughts (stimulates brain more)'],
    pause_after_phrase_1: 3,
    pause_after_phrase_2: 2,
    expected_time_seconds: 180,
    requires_preparation: true,
    works_in_public: false,
    emergency_suitable: false
  },

  // ========== EMOTIONAL_REGULATION (need 3 more) ==========
  {
    title: 'Feelings Too Big',
    category: 'Emotional_Regulation',
    wrong_way: '"Calm down! It\'s not a big deal! You\'re overreacting!"',
    phrase_1: 'Everything feels huge.',
    phrase_1_action: 'Get close. Lower voice. Make yourself small and calm.',
    phrase_2: 'You feel so much all at once, AND we can make it smaller.',
    phrase_2_action: 'Reduce stimulation. Turn off lights. Turn off sounds. Simplify environment.',
    phrase_3: 'Close your eyes and breathe. Just that. Nothing else.',
    phrase_3_action: 'Model slow breathing. Stay close. Wait. Don\'t talk. Just breathe together.',
    neurological_tip: 'DISTRACTED kids get emotionally flooded when sensory input stacks with feelings. Reducing ALL input = helps nervous system reset. ONE simple action (breathe) = manageable.',
    profile: 'DISTRACTED',
    tags: ['overwhelm', 'big feelings', 'emotional flood', 'sensory', 'regulation', 'adhd'],
    situation_trigger: 'When child is emotionally overwhelmed and everything feels too big to handle',
    location_type: ['home', 'anytime'],
    time_optimal: ['anytime'],
    intensity_level: 'severe',
    success_speed: '3min',
    parent_state: ['worried', 'unsure what to do', 'calm'],
    age_min: 4,
    age_max: 12,
    backup_plan: 'Take them to quiet space. Sit on floor together. Say nothing. Just be there. Wait until breathing slows. Then: "That was big. You\'re okay now."',
    common_mistakes: ['Asking "what\'s wrong?" mid-meltdown (they don\'t know)', 'Trying to solve the problem (they need regulation first)', 'Adding more input (talking, lights, movement)', 'Leaving them alone (they need co-regulation)'],
    pause_after_phrase_1: 4,
    pause_after_phrase_2: 3,
    expected_time_seconds: 180,
    requires_preparation: false,
    works_in_public: false,
    emergency_suitable: true
  },
  {
    title: 'Lost Item Panic',
    category: 'Emotional_Regulation',
    wrong_way: '"Just look for it! Retrace your steps! Why do you always lose things?!"',
    phrase_1: 'Can\'t find it, brain is panicking.',
    phrase_1_action: 'Stop them from frantic searching. Hand on shoulder. Make eye contact.',
    phrase_2: 'You need it now, AND frantic looking makes it harder to find.',
    phrase_2_action: 'Point to one small area. Just the couch. Not the whole room.',
    phrase_3: 'Look just here. I\'ll look over there. One spot at a time.',
    phrase_3_action: 'Search your area calmly. They search their area. If not found, next spot. Systematic.',
    neurological_tip: 'DISTRACTED brains panic-search ineffectively - emotional flooding blocks systematic thinking. YOU provide the system. Breaking search into zones = working memory support.',
    profile: 'DISTRACTED',
    tags: ['lost item', 'panic', 'searching', 'working memory', 'executive function', 'adhd'],
    situation_trigger: 'When child lost something important and is frantically searching everywhere in a panic',
    location_type: ['home', 'anytime'],
    time_optimal: ['anytime'],
    intensity_level: 'moderate',
    success_speed: '2min',
    parent_state: ['frustrated', 'rushed', 'calm'],
    age_min: 5,
    age_max: 14,
    backup_plan: 'Stop the search. Say: "We\'re stopping. Take three breaths." Breathe together. Then: "Let\'s start where you last remember having it." Provide external calm and logic.',
    common_mistakes: ['Saying "where did you leave it?" (they don\'t remember)', 'Letting them search chaotically (won\'t find it)', 'Getting angry about losing things (shame doesn\'t help)', 'Not helping search (they need executive function support)'],
    pause_after_phrase_1: 3,
    pause_after_phrase_2: 2,
    expected_time_seconds: 120,
    requires_preparation: false,
    works_in_public: false,
    emergency_suitable: false
  },
  {
    title: 'Change in Plans Meltdown',
    category: 'Emotional_Regulation',
    wrong_way: '"Things change! Deal with it! You need to be more flexible!"',
    phrase_1: 'The plan changed.',
    phrase_1_action: 'State the fact. Calm voice. Acknowledge the disruption.',
    phrase_2: 'You wanted the old plan, AND this is the new one.',
    phrase_2_action: 'Don\'t over-explain why. Just state what\'s happening now. Simple.',
    phrase_3: 'Take a minute to be upset. Then we do the new thing.',
    phrase_3_action: 'Give them 60 seconds to feel it. Set timer if needed. Then move forward.',
    neurological_tip: 'DISTRACTED kids rely on routine because their working memory can\'t hold flexibility. Change = cognitive load. Permission to be upset + clear timeline = processes emotion without getting stuck.',
    profile: 'DISTRACTED',
    tags: ['change', 'flexibility', 'plans changed', 'routine', 'transition', 'adhd'],
    situation_trigger: 'When plans changed unexpectedly and child is melting down about it',
    location_type: ['home', 'car', 'anytime'],
    time_optimal: ['anytime'],
    intensity_level: 'moderate',
    success_speed: '2min',
    parent_state: ['rushed', 'frustrated', 'stressed'],
    age_min: 4,
    age_max: 12,
    backup_plan: 'Say: "I know you\'re upset. The plan changed and that\'s hard. We\'re still going, just different." Validate, maintain boundary, move forward.',
    common_mistakes: ['Over-explaining the reasons (too much input)', 'Expecting immediate acceptance (they need processing time)', 'Saying "it\'s not a big deal" (invalidates real difficulty)', 'Getting frustrated at their rigidity (it\'s neurological)'],
    pause_after_phrase_1: 3,
    pause_after_phrase_2: 2,
    expected_time_seconds: 120,
    requires_preparation: false,
    works_in_public: true,
    emergency_suitable: false
  },

  // ========== HOMEWORK (need 3 more) ==========
  {
    title: 'Homework Instructions Too Long',
    category: 'Homework',
    wrong_way: '"The instructions are right there! Just READ them and do what it says!"',
    phrase_1: 'Too many words to remember.',
    phrase_1_action: 'Sit next to them. Read the instructions yourself first.',
    phrase_2: 'You want to do it right, AND the instructions are too long.',
    phrase_2_action: 'Get highlighter. Highlight ONLY the action word. "Draw" or "Write" or "Circle."',
    phrase_3: 'This word tells you what to do. Just this one thing.',
    phrase_3_action: 'Point to highlighted action. Cover the rest. Do that action only. Next problem after.',
    neurological_tip: 'DISTRACTED brains lose working memory in long instructions. Highlighting the ONE action word = reduces cognitive load. They can do the task - they can\'t hold 4 sentences in memory.',
    profile: 'DISTRACTED',
    tags: ['homework', 'instructions', 'reading comprehension', 'working memory', 'executive function', 'adhd'],
    situation_trigger: 'When child can\'t start homework because the instructions are too long and confusing',
    location_type: ['home', 'school'],
    time_optimal: ['afternoon', 'evening'],
    intensity_level: 'moderate',
    success_speed: '2min',
    parent_state: ['frustrated', 'patient', 'calm'],
    age_min: 6,
    age_max: 14,
    backup_plan: 'Read instructions TO them. Say: "So you need to [action]." Simplify into ONE sentence. Write it on a sticky note. Put sticky on page.',
    common_mistakes: ['Saying "just read it again" (won\'t help)', 'Expecting them to remember multi-step directions (working memory deficit)', 'Getting frustrated they "aren\'t paying attention" (they can\'t hold it)', 'Making them figure it out alone (they need scaffolding)'],
    pause_after_phrase_1: 3,
    pause_after_phrase_2: 2,
    expected_time_seconds: 120,
    requires_preparation: true,
    works_in_public: false,
    emergency_suitable: false
  },
  {
    title: 'Homework Distraction Loop',
    category: 'Homework',
    wrong_way: '"Stop playing with that! Focus on your work! How many times do I have to tell you?!"',
    phrase_1: 'Hands found something to do.',
    phrase_1_action: 'Don\'t take the fidget away yet. Acknowledge the need.',
    phrase_2: 'You need your hands busy, AND homework needs doing.',
    phrase_2_action: 'Offer different fidget. Small, silent one. Or pencil to click.',
    phrase_3: 'This fidget while you work, or hands free. Pick one.',
    phrase_3_action: 'Let them choose. If fidget helps, allow it. If distracts, remove. Monitor.',
    neurological_tip: 'DISTRACTED kids NEED fidgeting - it increases dopamine for focus. Problem isn\'t fidgeting, it\'s WHAT they fidget with. Silent fidget = accommodation, not distraction.',
    profile: 'DISTRACTED',
    tags: ['homework', 'fidgeting', 'distraction', 'focus', 'adhd', 'hands busy'],
    situation_trigger: 'When child keeps fidgeting with objects during homework instead of focusing',
    location_type: ['home'],
    time_optimal: ['afternoon', 'evening'],
    intensity_level: 'mild',
    success_speed: '1min',
    parent_state: ['frustrated', 'losing patience', 'calm'],
    age_min: 6,
    age_max: 14,
    backup_plan: 'Give them gum to chew or stress ball to squeeze. Say: "Hands busy, eyes on work." Movement helps their brain focus.',
    common_mistakes: ['Taking away all fidgets (removes their focus tool)', 'Demanding perfect stillness (cognitively impossible)', 'Assuming fidgeting = not working (often the opposite)', 'Punishment for distraction (it\'s neurological need)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 2,
    expected_time_seconds: 60,
    requires_preparation: true,
    works_in_public: false,
    emergency_suitable: false
  },
  {
    title: 'Homework Environment Chaos',
    category: 'Homework',
    wrong_way: '"Just tune it out and DO YOUR WORK! Other kids can focus!"',
    phrase_1: 'Too much around you.',
    phrase_1_action: 'Look at workspace. Notice the visual clutter, sounds, movement.',
    phrase_2: 'You can\'t focus with chaos, AND we can make it quiet.',
    phrase_2_action: 'Clear the desk. Remove everything except one worksheet and pencil.',
    phrase_3: 'Different room or headphones here. Pick what helps your brain.',
    phrase_3_action: 'Move to quieter room, or give noise-canceling headphones. Simplify environment.',
    neurological_tip: 'DISTRACTED brains cannot filter environmental input - they take in EVERYTHING. Reducing sensory input = frees up cognitive resources for homework. Environment matters more than willpower.',
    profile: 'DISTRACTED',
    tags: ['homework', 'environment', 'sensory', 'focus', 'distraction', 'adhd'],
    situation_trigger: 'When child can\'t focus on homework because environment is too chaotic/distracting',
    location_type: ['home'],
    time_optimal: ['afternoon', 'evening'],
    intensity_level: 'moderate',
    success_speed: '2min',
    parent_state: ['frustrated', 'calm', 'structured'],
    age_min: 6,
    age_max: 16,
    backup_plan: 'Move to bathroom or closet. Sounds crazy, but small, boring spaces = fewer distractions. Sit on floor. Do homework there. Function over convention.',
    common_mistakes: ['Expecting them to focus anywhere (environment is critical)', 'Adding "background music to help" (more input = worse)', 'Leaving siblings in same room (guaranteed distraction)', 'Blame for "not trying hard enough" (they are trying)'],
    pause_after_phrase_1: 3,
    pause_after_phrase_2: 2,
    expected_time_seconds: 120,
    requires_preparation: true,
    works_in_public: false,
    emergency_suitable: false
  },

  // ========== HYGIENE (need 3 more) ==========
  {
    title: 'Tooth Brushing Forgotten Mid-Task',
    category: 'Hygiene',
    wrong_way: '"I told you to brush your teeth! Why are you playing?! Get back in there!"',
    phrase_1: 'Brain wandered from toothbrush.',
    phrase_1_action: 'Find them playing. Don\'t yell. State what happened neutrally.',
    phrase_2: 'You started brushing, AND your brain forgot partway through.',
    phrase_2_action: 'Walk them back to bathroom. Hand them toothbrush. Stay.',
    phrase_3: 'Finish brushing while I watch. I\'ll count to 30.',
    phrase_3_action: 'Count out loud. Stay in bathroom. External cue = completes task.',
    neurological_tip: 'DISTRACTED kids genuinely forget what they\'re doing mid-task - working memory drops it. They NEED external prompts to finish. Staying with them = necessary scaffolding, not hovering.',
    profile: 'DISTRACTED',
    tags: ['tooth brushing', 'hygiene', 'forgetting', 'working memory', 'routine', 'adhd'],
    situation_trigger: 'When you sent child to brush teeth but found them doing something else instead',
    location_type: ['home', 'bathroom'],
    time_optimal: ['morning', 'evening'],
    intensity_level: 'mild',
    success_speed: '1min',
    parent_state: ['frustrated', 'rushed', 'patient'],
    age_min: 4,
    age_max: 12,
    backup_plan: 'Brush teeth together in the bathroom. Stand next to them. Count together. Make it a routine you do WITH them, not send them to do.',
    common_mistakes: ['Asking "why didn\'t you brush?" (they don\'t know)', 'Expecting memory to improve without support (it won\'t)', 'Punishment for forgetting (doesn\'t build working memory)', 'Sending them away alone repeatedly (same result every time)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 2,
    expected_time_seconds: 60,
    requires_preparation: false,
    works_in_public: false,
    emergency_suitable: false
  },
  {
    title: 'Shower Sensory Overload',
    category: 'Hygiene',
    wrong_way: '"Get in the shower! You\'re dirty and you smell! This is not optional!"',
    phrase_1: 'Water feels too much.',
    phrase_1_action: 'Stop forcing. Acknowledge the sensory issue is real.',
    phrase_2: 'You hate how water feels, AND bodies need washing.',
    phrase_2_action: 'Adjust water temperature. Lower pressure. Make it less intense.',
    phrase_3: 'Quick rinse or washcloth clean. You pick how.',
    phrase_3_action: 'If shower: 2 minutes max. If washcloth: they wash pits/privates/face. Done.',
    neurological_tip: 'DISTRACTED kids often have tactile sensory issues - water pressure/temperature genuinely hurts. Modifying = accommodation. Clean enough > perfect. Forcing = shower trauma.',
    profile: 'DISTRACTED',
    tags: ['shower', 'hygiene', 'sensory', 'water', 'bathing', 'adhd'],
    situation_trigger: 'When child is refusing shower because water sensory input feels overwhelming',
    location_type: ['home', 'bathroom'],
    time_optimal: ['evening', 'anytime'],
    intensity_level: 'moderate',
    success_speed: '2min',
    parent_state: ['frustrated', 'exhausted', 'calm'],
    age_min: 5,
    age_max: 14,
    backup_plan: 'Skip shower tonight. Washcloth bath. Face, pits, privates. 60 seconds. Done. They\'re clean enough. Preserve the relationship.',
    common_mistakes: ['Forcing full shower "because they need it" (creates hygiene trauma)', 'Saying water "doesn\'t hurt" (invalidates real sensory pain)', 'Making them stay in until fully clean (overwhelm increases)', 'Punishment for avoiding shower (doesn\'t address sensory issue)'],
    pause_after_phrase_1: 3,
    pause_after_phrase_2: 2,
    expected_time_seconds: 120,
    requires_preparation: false,
    works_in_public: false,
    emergency_suitable: false
  },
  {
    title: 'Hand Washing Takes Too Long',
    category: 'Hygiene',
    wrong_way: '"Just wash your hands! It takes 20 seconds! We don\'t have all day!"',
    phrase_1: 'Hands need washing, you\'re stuck.',
    phrase_1_action: 'Stand next to sink. Don\'t rush them. Acknowledge they\'re frozen.',
    phrase_2: 'You want to do it perfect, AND quick is good enough.',
    phrase_2_action: 'Turn on water. Put soap in their hands. Count for them.',
    phrase_3: 'Rub while I count to 10. Then rinse. That\'s enough.',
    phrase_3_action: 'Count out loud. At 10: "Rinse." Turn off water. Hand towel. Done.',
    neurological_tip: 'DISTRACTED kids get perfectionism paralysis OR time blindness - either can\'t start or don\'t know when to stop. External timer/counter = working memory support.',
    profile: 'DISTRACTED',
    tags: ['hand washing', 'hygiene', 'perfectionism', 'time blindness', 'stuck', 'adhd'],
    situation_trigger: 'When child is taking forever to wash hands because they\'re stuck in the process',
    location_type: ['home', 'bathroom', 'restaurant'],
    time_optimal: ['anytime'],
    intensity_level: 'mild',
    success_speed: '30sec',
    parent_state: ['rushed', 'patient', 'calm'],
    age_min: 4,
    age_max: 12,
    backup_plan: 'Turn water on. Say: "In, soap, rinse, out. 10 seconds total." Do it with them. Model speed. They copy.',
    common_mistakes: ['Saying "just hurry up" (doesn\'t help time blindness)', 'Expecting them to self-monitor time (working memory deficit)', 'Getting frustrated at slowness (not intentional)', 'Leaving them alone to finish (they need external cue)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 2,
    expected_time_seconds: 30,
    requires_preparation: false,
    works_in_public: true,
    emergency_suitable: false
  },

  // ========== MEALTIME (need 3 more) ==========
  {
    title: 'Mealtime Conversation Overload',
    category: 'Mealtime',
    wrong_way: '"Eat your food! Stop talking and just EAT! Why is your plate still full?!"',
    phrase_1: 'Too much talking to eat.',
    phrase_1_action: 'Notice they\'re engaging in conversation, not eating.',
    phrase_2: 'You like talking with us, AND talking stops eating.',
    phrase_2_action: 'Point to plate. Show how much is left. State the reality.',
    phrase_3: 'Quiet eating for 5 bites. Then talk. Take a bite now.',
    phrase_3_action: 'Count the bites. After 5: "Okay, now you can talk." Repeat if needed.',
    neurological_tip: 'DISTRACTED kids cannot do conversation AND eating simultaneously - working memory only holds one task. Breaking it into chunks = they get both, just sequentially.',
    profile: 'DISTRACTED',
    tags: ['mealtime', 'eating', 'talking', 'distraction', 'multi-tasking', 'adhd'],
    situation_trigger: 'When child is so engaged in conversation they forget to eat their meal',
    location_type: ['home', 'restaurant'],
    time_optimal: ['afternoon', 'evening'],
    intensity_level: 'mild',
    success_speed: '2min',
    parent_state: ['frustrated', 'patient', 'calm'],
    age_min: 4,
    age_max: 12,
    backup_plan: 'Say: "Eat half, then we talk about your day." Set boundary. They eat in silence first. Then conversation. Sequential = manageable.',
    common_mistakes: ['Expecting them to eat while talking (can\'t)', 'Getting angry food isn\'t eaten (they genuinely forgot)', 'Continuing conversation (you\'re part of the distraction)', 'Removing plate as punishment (doesn\'t teach skill)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 2,
    expected_time_seconds: 120,
    requires_preparation: false,
    works_in_public: true,
    emergency_suitable: false
  },
  {
    title: 'Forgot What Was for Dinner',
    category: 'Mealtime',
    wrong_way: '"I JUST told you what we\'re eating! Why don\'t you ever listen?!"',
    phrase_1: 'You forgot what\'s for dinner.',
    phrase_1_action: 'Don\'t be offended. State it again. Calmly.',
    phrase_2: 'Your brain didn\'t hold it, AND here\'s what we\'re eating.',
    phrase_2_action: 'Show them the food. Point to it. Visual + verbal = better.',
    phrase_3: 'This is dinner. Eat some or make toast. Pick.',
    phrase_3_action: 'Give choice. Don\'t re-explain. Just move forward.',
    neurological_tip: 'DISTRACTED kids\' working memory doesn\'t retain verbal information - they GENUINELY forget what you said 2 minutes ago. Visual reminder > repeating. Not defiance, neurological.',
    profile: 'DISTRACTED',
    tags: ['mealtime', 'forgetting', 'working memory', 'listening', 'dinner', 'adhd'],
    situation_trigger: 'When child forgot what was for dinner after you just told them',
    location_type: ['home'],
    time_optimal: ['evening'],
    intensity_level: 'mild',
    success_speed: '30sec',
    parent_state: ['frustrated', 'patient', 'calm'],
    age_min: 4,
    age_max: 14,
    backup_plan: 'Write dinner on whiteboard in kitchen every day. They check board instead of asking. External memory = less frustration for everyone.',
    common_mistakes: ['Getting offended they "don\'t listen" (it\'s working memory)', 'Asking "what did I just say?" (they don\'t remember)', 'Lengthy explanation of meal (too much input)', 'Expecting memory to improve without accommodation (it won\'t)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 1,
    expected_time_seconds: 30,
    requires_preparation: false,
    works_in_public: false,
    emergency_suitable: false
  },
  {
    title: 'Overwhelmed by Full Plate',
    category: 'Mealtime',
    wrong_way: '"It\'s just food! Other kids eat this much! Why is this so hard?!"',
    phrase_1: 'Plate looks like too much.',
    phrase_1_action: 'Notice they\'re staring at full plate, not starting.',
    phrase_2: 'You see all the food at once, AND we can make it smaller.',
    phrase_2_action: 'Take half the food OFF the plate. Put it aside. Show them less.',
    phrase_3: 'Just eat this much. This is enough. Start anywhere.',
    phrase_3_action: 'Point to smaller portion. Walk away. Let them eat without pressure.',
    neurological_tip: 'DISTRACTED kids get visually overwhelmed by full plates - too much input. Smaller portion = manageable. They\'ll eat more if they finish and want seconds. Start small.',
    profile: 'DISTRACTED',
    tags: ['mealtime', 'overwhelm', 'portion size', 'visual overload', 'eating', 'adhd'],
    situation_trigger: 'When child is staring at full plate overwhelmed and not eating anything',
    location_type: ['home', 'restaurant'],
    time_optimal: ['anytime'],
    intensity_level: 'mild',
    success_speed: '1min',
    parent_state: ['frustrated', 'worried', 'calm'],
    age_min: 3,
    age_max: 12,
    backup_plan: 'Serve very small portions from the start. Always. They can ask for more. Starting small > fighting to finish large portions.',
    common_mistakes: ['Insisting they eat the full plate (creates food battle)', 'Comparing to siblings portions (different brains)', 'Forcing them to try everything (overwhelm increases)', 'Punishment for not eating (creates food anxiety)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 2,
    expected_time_seconds: 60,
    requires_preparation: false,
    works_in_public: true,
    emergency_suitable: false
  },

  // ========== MORNING_ROUTINES (need 2 more) ==========
  {
    title: 'Morning Forgot Backpack Again',
    category: 'Morning_Routines',
    wrong_way: '"How do you ALWAYS forget your backpack?! It\'s right THERE! Go get it!"',
    phrase_1: 'Backpack got forgotten.',
    phrase_1_action: 'Stop at door. Point to the backpack hook/spot. Calm.',
    phrase_2: 'Your brain skipped it, AND school needs backpack.',
    phrase_2_action: 'Walk them back to backpack. Hand it to them. Don\'t lecture.',
    phrase_3: 'Touch the backpack before shoes tomorrow. Remember: backpack, then shoes.',
    phrase_3_action: 'Have them repeat: "Backpack, then shoes." Creating a routine phrase.',
    neurological_tip: 'DISTRACTED brains don\'t have automatic routines - working memory fails. Verbal script + physical order = external memory. Needs MANY repetitions to stick.',
    profile: 'DISTRACTED',
    tags: ['morning', 'backpack', 'forgetting', 'working memory', 'routine', 'school', 'adhd'],
    situation_trigger: 'When child forgot backpack again while rushing out door in morning',
    location_type: ['home', 'door'],
    time_optimal: ['morning'],
    intensity_level: 'mild',
    success_speed: '30sec',
    parent_state: ['rushed', 'frustrated', 'patient'],
    age_min: 5,
    age_max: 14,
    backup_plan: 'Put backpack in front of door at night. They literally trip over it. Physical barrier = memory aid. Can\'t leave without moving it.',
    common_mistakes: ['Getting angry about forgetting (doesn\'t build memory)', 'Expecting them to remember after one reminder (needs hundreds)', 'Not creating physical/visual system (verbal memory fails)', 'Making them late as consequence (punishes disability)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 2,
    expected_time_seconds: 30,
    requires_preparation: true,
    works_in_public: false,
    emergency_suitable: false
  },
  {
    title: 'Morning Sounds Overwhelming',
    category: 'Morning_Routines',
    wrong_way: '"Stop complaining! It\'s just normal morning sounds! Get dressed!"',
    phrase_1: 'Everything sounds too loud.',
    phrase_1_action: 'Notice they\'re covering ears or shutting down. Acknowledge it.',
    phrase_2: 'You hear it all at once, AND we can make it quieter.',
    phrase_2_action: 'Turn off radio/TV. Close door. Reduce noise sources. Speak softly.',
    phrase_3: 'Headphones on or quiet room. Pick where feels better.',
    phrase_3_action: 'Give noise-canceling headphones or move to quiet bedroom. Let them get ready there.',
    neurological_tip: 'Morning sensory filtering is poor for DISTRACTED kids - everything is LOUD. Reducing input = allows them to function. Environment modification > forcing them to "deal with it."',
    profile: 'DISTRACTED',
    tags: ['morning', 'sensory', 'noise', 'overwhelm', 'auditory overload', 'adhd'],
    situation_trigger: 'When morning household noise is overwhelming child and preventing getting ready',
    location_type: ['home'],
    time_optimal: ['morning'],
    intensity_level: 'moderate',
    success_speed: '1min',
    parent_state: ['rushed', 'frustrated', 'calm'],
    age_min: 4,
    age_max: 14,
    backup_plan: 'Everyone gets ready in silence. No talking, no TV, no music. Boring mornings = less overwhelm. Function over entertainment.',
    common_mistakes: ['Saying "it\'s not that loud" (to them it is)', 'Continuing to add noise (TV, talking, siblings)', 'Expecting them to adapt (sensory processing doesn\'t change)', 'Punishment for shutting down (it\'s protective response)'],
    pause_after_phrase_1: 3,
    pause_after_phrase_2: 2,
    expected_time_seconds: 60,
    requires_preparation: true,
    works_in_public: false,
    emergency_suitable: false
  },

  // ========== PROBLEM_SOLVING (need 3 more) ==========
  {
    title: 'Too Many Choices Freeze',
    category: 'Problem_Solving',
    wrong_way: '"Just PICK one! It\'s not that hard! Make a decision!"',
    phrase_1: 'Too many things to choose.',
    phrase_1_action: 'Notice they\'re frozen looking at options. Acknowledge overwhelm.',
    phrase_2: 'You want to pick right, AND lots of choices makes it hard.',
    phrase_2_action: 'Remove all but TWO options. Hide the rest. Show only two.',
    phrase_3: 'This one or this one. Point to the one you want.',
    phrase_3_action: 'Hold up two things. Wait. They point. Done. Move on immediately.',
    neurological_tip: 'DISTRACTED kids have decision paralysis with multiple options - executive function overload. Two choices = manageable. More = shutdown. Simplify decisions for them.',
    profile: 'DISTRACTED',
    tags: ['choices', 'decisions', 'overwhelm', 'executive function', 'paralysis', 'adhd'],
    situation_trigger: 'When child is frozen unable to choose because there are too many options',
    location_type: ['home', 'store', 'anytime'],
    time_optimal: ['anytime'],
    intensity_level: 'mild',
    success_speed: '30sec',
    parent_state: ['rushed', 'patient', 'calm'],
    age_min: 3,
    age_max: 12,
    backup_plan: 'Pick FOR them. Say: "Your brain is stuck. I\'m choosing this one. Next time you pick." Remove the decision burden.',
    common_mistakes: ['Offering more options to help (makes it worse)', 'Getting frustrated they can\'t decide (it\'s neurological)', 'Waiting indefinitely for decision (they won\'t make one)', 'Explaining pros/cons of each (too much input)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 2,
    expected_time_seconds: 30,
    requires_preparation: false,
    works_in_public: true,
    emergency_suitable: false
  },
  {
    title: 'Problem Feels Impossible',
    category: 'Problem_Solving',
    wrong_way: '"You can figure this out! Just THINK! It\'s not that complicated!"',
    phrase_1: 'Problem feels too big.',
    phrase_1_action: 'Sit next to them. Acknowledge they\'re stuck. Calm presence.',
    phrase_2: 'You can\'t see the answer, AND we can make it smaller.',
    phrase_2_action: 'Break problem into ONE tiny piece. "What\'s the first tiny step?"',
    phrase_3: 'Just the first part. Tell me one thing you could try.',
    phrase_3_action: 'Wait. If they say something, do it. If stuck, YOU name the first step.',
    neurological_tip: 'DISTRACTED kids cannot hold complex problems in working memory - they see it as impossible blob. YOU break it down. First step only. One at a time builds momentum.',
    profile: 'DISTRACTED',
    tags: ['problem solving', 'overwhelm', 'executive function', 'stuck', 'breaking down tasks', 'adhd'],
    situation_trigger: 'When child is stuck on problem because it feels too big and impossible to solve',
    location_type: ['home', 'school'],
    time_optimal: ['anytime'],
    intensity_level: 'moderate',
    success_speed: '2min',
    parent_state: ['frustrated', 'patient', 'calm'],
    age_min: 6,
    age_max: 16,
    backup_plan: 'Say: "I\'ll do step 1 with you. You watch." Do first step together. Then: "Now you do step 2." Scaffolding = teaching, not doing for them.',
    common_mistakes: ['Saying "just figure it out" (they can\'t)', 'Giving the answer (doesn\'t teach process)', 'Leaving them stuck (they need support)', 'Multi-step solutions (working memory can\'t hold it)'],
    pause_after_phrase_1: 3,
    pause_after_phrase_2: 2,
    expected_time_seconds: 120,
    requires_preparation: false,
    works_in_public: false,
    emergency_suitable: false
  },
  {
    title: 'Looking for Solution in Wrong Place',
    category: 'Problem_Solving',
    wrong_way: '"Why are you looking THERE?! Think logically! Where would it be?!"',
    phrase_1: 'Brain is searching everywhere.',
    phrase_1_action: 'Stop their frantic searching. Hand on shoulder. Make eye contact.',
    phrase_2: 'You want to find it, AND random looking takes forever.',
    phrase_2_action: 'Ask: "Where did you last use it?" Start memory there.',
    phrase_3: 'Start where you last saw it. Walk me there.',
    phrase_3_action: 'Go to that spot together. Look systematically. You provide the logic.',
    neurological_tip: 'DISTRACTED kids lack systematic problem-solving - they search chaotically because executive function doesn\'t organize. YOU provide the system. Walking it back = external working memory.',
    profile: 'DISTRACTED',
    tags: ['problem solving', 'searching', 'lost item', 'executive function', 'logic', 'adhd'],
    situation_trigger: 'When child is looking for something in completely wrong places randomly',
    location_type: ['home', 'anytime'],
    time_optimal: ['anytime'],
    intensity_level: 'mild',
    success_speed: '2min',
    parent_state: ['frustrated', 'patient', 'calm'],
    age_min: 5,
    age_max: 14,
    backup_plan: 'Stop the search. Say: "Let\'s think. When did you last have it?" Talk it through OUT LOUD. External processing = helps their brain work.',
    common_mistakes: ['Getting frustrated at illogical searching (they don\'t have the system)', 'Letting them search chaotically (won\'t find it)', 'Not teaching systematic approach (they need explicit instruction)', 'Doing the search for them (doesn\'t build skill)'],
    pause_after_phrase_1: 3,
    pause_after_phrase_2: 2,
    expected_time_seconds: 120,
    requires_preparation: false,
    works_in_public: false,
    emergency_suitable: false
  },

  // ========== SCREENS (need 3 more) ==========
  {
    title: 'Screen Hyperfocus Can\'t Hear You',
    category: 'Screens',
    wrong_way: '"I\'m TALKING to you! Stop ignoring me! HELLO?!"',
    phrase_1: 'Brain is locked on screen.',
    phrase_1_action: 'Get in front of screen. Block their view gently. Make eye contact.',
    phrase_2: 'You can\'t hear me when eyes are locked, AND I need your attention.',
    phrase_2_action: 'Tap shoulder. Say their name. Wait for eye contact before continuing.',
    phrase_3: 'Eyes on me first. Then I\'ll tell you what I need.',
    phrase_3_action: 'Wait for eyes. THEN give the direction. Don\'t talk to the back of their head.',
    neurological_tip: 'Screen hyperfocus blocks auditory processing for DISTRACTED kids - they CANNOT hear you. Not ignoring, genuinely not processing. Eye contact first = brain switches channels.',
    profile: 'DISTRACTED',
    tags: ['screens', 'hyperfocus', 'ignoring', 'not listening', 'attention', 'adhd'],
    situation_trigger: 'When child is so focused on screen they genuinely can\'t hear you talking',
    location_type: ['home', 'car', 'anytime'],
    time_optimal: ['anytime'],
    intensity_level: 'mild',
    success_speed: '30sec',
    parent_state: ['frustrated', 'feeling ignored', 'calm'],
    age_min: 4,
    age_max: 16,
    backup_plan: 'Gently take device. Say: "I need your ears. I\'ll give this back after we talk." Get attention first, THEN communicate.',
    common_mistakes: ['Yelling from across room (they don\'t hear it)', 'Thinking they\'re ignoring you (neurologically can\'t process)', 'Talking without eye contact (words don\'t register)', 'Punishment for "not listening" (wasn\'t accessible)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 2,
    expected_time_seconds: 30,
    requires_preparation: false,
    works_in_public: true,
    emergency_suitable: false
  },
  {
    title: 'Screen Time Forgot the Limit',
    category: 'Screens',
    wrong_way: '"I TOLD you 30 minutes! Time\'s up! Why do you never remember?!"',
    phrase_1: 'Time went by, you forgot.',
    phrase_1_action: 'Don\'t be angry. State the fact. Point to clock/timer.',
    phrase_2: 'Your brain loses time on screens, AND time is up.',
    phrase_2_action: 'Show them the timer that went off. Visual proof.',
    phrase_3: 'Save and turn off now. I\'m counting to 10.',
    phrase_3_action: 'Count slowly. At 10: power off if needed. Calm and firm.',
    neurological_tip: 'DISTRACTED kids have severe time blindness, especially during screen dopamine. They CANNOT track time internally. Timer is non-negotiable accommodation, not optional.',
    profile: 'DISTRACTED',
    tags: ['screen time', 'time blindness', 'limits', 'forgetting time', 'timer', 'adhd'],
    situation_trigger: 'When child went over screen time limit because they lost track of time',
    location_type: ['home', 'anytime'],
    time_optimal: ['anytime'],
    intensity_level: 'moderate',
    success_speed: '30sec',
    parent_state: ['frustrated', 'calm', 'firm'],
    age_min: 5,
    age_max: 16,
    backup_plan: 'Use app that auto-locks device at time limit. Remove the need for them to self-monitor. External control = accommodation for time blindness.',
    common_mistakes: ['Expecting them to "just remember" time (neurologically impossible)', 'Getting angry about time blindness (it\'s not intentional)', 'No visual timer (they need external cue)', 'Blaming for "not listening" (they genuinely lost time)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 2,
    expected_time_seconds: 30,
    requires_preparation: true,
    works_in_public: false,
    emergency_suitable: false
  },
  {
    title: 'Screen Meltdown When It Dies',
    category: 'Screens',
    wrong_way: '"You should have charged it! That\'s your fault! Stop crying about it!"',
    phrase_1: 'Device died, you\'re upset.',
    phrase_1_action: 'Acknowledge the real distress. Don\'t minimize. Sit near them.',
    phrase_2: 'You were in the middle of something, AND batteries run out.',
    phrase_2_action: 'Validate the frustration. Don\'t fix or solve. Just acknowledge.',
    phrase_3: 'Plug it in or do something else while it charges. Pick one.',
    phrase_3_action: 'Offer choice. Give them control over what happens next. Don\'t force.',
    neurological_tip: 'Abrupt screen loss = dopamine crash for DISTRACTED brains. Meltdown is neurological, not manipulative. Validation + choice = processes emotion without shame.',
    profile: 'DISTRACTED',
    tags: ['screens', 'device died', 'meltdown', 'frustration', 'dopamine crash', 'adhd'],
    situation_trigger: 'When device battery died mid-use and child is having meltdown about it',
    location_type: ['home', 'car', 'anytime'],
    time_optimal: ['anytime'],
    intensity_level: 'moderate',
    success_speed: '2min',
    parent_state: ['frustrated', 'calm', 'patient'],
    age_min: 4,
    age_max: 14,
    backup_plan: 'Let them be upset. Say: "I know that feels bad. Sit with it for a minute." Don\'t fix. Emotion needs processing. Then redirect.',
    common_mistakes: ['Saying "you should have charged it" (blame adds shame)', 'Immediately offering replacement (they need to process emotion)', 'Minimizing feelings (dopamine crash is real)', 'Rushing them to "get over it" (takes time)'],
    pause_after_phrase_1: 3,
    pause_after_phrase_2: 2,
    expected_time_seconds: 120,
    requires_preparation: false,
    works_in_public: true,
    emergency_suitable: false
  },

  // ========== SOCIAL (need 3 more) ==========
  {
    title: 'Blurted Inappropriate Thing',
    category: 'Social',
    wrong_way: '"You can\'t SAY that! What is WRONG with you?! That was so rude!"',
    phrase_1: 'That came out wrong.',
    phrase_1_action: 'Quick damage control. Don\'t shame in front of others. Neutral face.',
    phrase_2: 'Your brain said it before checking, AND it hurt feelings.',
    phrase_2_action: 'Pull them aside privately if possible. Explain impact calmly.',
    phrase_3: 'Say you didn\'t mean it that way. Try now.',
    phrase_3_action: 'Give them words to repair. Help them do it. Coach through it.',
    neurological_tip: 'DISTRACTED kids have poor impulse control over speech - mouth works faster than filter. Public shaming increases future anxiety. Private coaching = teaches without trauma.',
    profile: 'DISTRACTED',
    tags: ['social', 'blurting', 'impulse control', 'rude', 'inappropriate', 'adhd'],
    situation_trigger: 'When child blurted something inappropriate in social situation and you\'re mortified',
    location_type: ['public', 'anytime'],
    time_optimal: ['anytime'],
    intensity_level: 'moderate',
    success_speed: '1min',
    parent_state: ['embarrassed', 'angry', 'calm'],
    age_min: 5,
    age_max: 14,
    backup_plan: 'Pull them aside. Say: "That hurt feelings. Let\'s fix it together." Walk back with them. Say: "[Child] wants to say something." Let them try.',
    common_mistakes: ['Public shaming (creates social anxiety)', 'Expecting filter to develop without coaching (needs explicit teaching)', 'Punishment for blurting (it\'s neurological impulse control)', 'Not repairing (they need to learn how)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 2,
    expected_time_seconds: 60,
    requires_preparation: false,
    works_in_public: true,
    emergency_suitable: false
  },
  {
    title: 'Forgot Friend\'s Name Mid-Introduction',
    category: 'Social',
    wrong_way: '"You KNOW their name! We just talked about this! Remember?!"',
    phrase_1: 'Name slipped away.',
    phrase_1_action: 'Jump in casually. Don\'t make it a big deal. Rescue them.',
    phrase_2: 'Your brain dropped it, AND that\'s okay.',
    phrase_2_action: 'Introduce yourself to fill gap. Model smoothness. No shame.',
    phrase_3: 'I\'m [name]. This is [friend]. Now you know again.',
    phrase_3_action: 'Reintroduce casually. Move conversation forward. No dwelling.',
    neurological_tip: 'Working memory fails DISTRACTED kids in social moments - stress makes it worse. Rescuing without shame = models that memory fails happen, no big deal. Reduces social anxiety.',
    profile: 'DISTRACTED',
    tags: ['social', 'names', 'memory', 'working memory', 'introductions', 'adhd'],
    situation_trigger: 'When child forgot someone\'s name mid-introduction and is embarrassed',
    location_type: ['public', 'anytime'],
    time_optimal: ['anytime'],
    intensity_level: 'mild',
    success_speed: '30sec',
    parent_state: ['embarrassed', 'calm', 'patient'],
    age_min: 6,
    age_max: 16,
    backup_plan: 'Say smoothly: "This is [friend], and this is [child]. Great, everyone knows everyone!" Take over the introduction completely.',
    common_mistakes: ['Making them feel bad for forgetting (increases anxiety)', 'Quizzing them "what\'s their name?" (they don\'t remember)', 'Not rescuing (leaves them drowning socially)', 'Bringing it up later (no need)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 1,
    expected_time_seconds: 30,
    requires_preparation: false,
    works_in_public: true,
    emergency_suitable: false
  },
  {
    title: 'Lost in Group Conversation',
    category: 'Social',
    wrong_way: '"Pay attention! Everyone is talking and you\'re just spacing out!"',
    phrase_1: 'Too many people talking.',
    phrase_1_action: 'Notice they\'ve checked out. Acknowledge overwhelm quietly.',
    phrase_2: 'You can\'t follow everyone at once, AND that\'s normal.',
    phrase_2_action: 'Give them permission to step back. Validate it\'s overwhelming.',
    phrase_3: 'Watch and listen or take a break. Both are okay.',
    phrase_3_action: 'Let them sit quietly or step away. No pressure to participate.',
    neurological_tip: 'DISTRACTED kids cannot process multi-person conversations - too many inputs. Forcing participation = shutdown. Permission to observe = removes performance anxiety.',
    profile: 'DISTRACTED',
    tags: ['social', 'group conversation', 'overwhelm', 'processing', 'listening', 'adhd'],
    situation_trigger: 'When child is lost in group conversation and spacing out completely',
    location_type: ['public', 'home', 'anytime'],
    time_optimal: ['anytime'],
    intensity_level: 'mild',
    success_speed: '30sec',
    parent_state: ['worried', 'calm', 'patient'],
    age_min: 6,
    age_max: 16,
    backup_plan: 'Pull them aside. Say: "Big groups are hard. Want to go get some quiet?" Offer escape. Protect them from overwhelm.',
    common_mistakes: ['Forcing participation (increases shutdown)', 'Saying "just listen" (they are, can\'t process)', 'Comparing to social siblings (different brains)', 'Shame for being quiet (quiet is coping)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 2,
    expected_time_seconds: 30,
    requires_preparation: false,
    works_in_public: true,
    emergency_suitable: false
  },

  // ========== TANTRUMS (need 3 more) ==========
  {
    title: 'Tantrum From Sensory Overload',
    category: 'Tantrums',
    wrong_way: '"Calm down! Stop screaming! You\'re being ridiculous!"',
    phrase_1: 'Everything is too much.',
    phrase_1_action: 'Lower voice. Dim lights if possible. Reduce ALL input immediately.',
    phrase_2: 'Your body feels flooded, AND we can make it quieter.',
    phrase_2_action: 'Offer dark quiet space. Headphones. Weighted blanket. Reduce input.',
    phrase_3: 'Come to quiet with me. Or stay here and cover your ears.',
    phrase_3_action: 'Walk to quiet space. Invite them to follow. Sit in silence. Wait.',
    neurological_tip: 'DISTRACTED tantrum = sensory system overload, not behavior. MORE input (talking, touching) = worse. LESS input = nervous system calms. Silence is the intervention.',
    profile: 'DISTRACTED',
    tags: ['tantrum', 'meltdown', 'sensory overload', 'overwhelm', 'shutdown', 'adhd'],
    situation_trigger: 'When child is having tantrum because sensory system is completely overloaded',
    location_type: ['home', 'public', 'anytime'],
    time_optimal: ['anytime'],
    intensity_level: 'severe',
    success_speed: '5min',
    parent_state: ['worried', 'calm', 'patient'],
    age_min: 3,
    age_max: 12,
    backup_plan: 'If in public: carry to car. Sit in back seat with them. All electronics off. Silence. Just wait. Dark quiet car = sensory reset.',
    common_mistakes: ['Talking during meltdown (adds input)', 'Asking questions (can\'t process language)', 'Touching/hugging (tactile can overwhelm more)', 'Staying in overwhelming environment (can\'t regulate there)'],
    pause_after_phrase_1: 3,
    pause_after_phrase_2: 2,
    expected_time_seconds: 300,
    requires_preparation: false,
    works_in_public: true,
    emergency_suitable: true
  },
  {
    title: 'Tantrum Because Task Too Hard',
    category: 'Tantrums',
    wrong_way: '"It\'s NOT that hard! Stop freaking out and just DO IT!"',
    phrase_1: 'This feels impossible.',
    phrase_1_action: 'Stop the task. Put it away. Lower the pressure immediately.',
    phrase_2: 'You can\'t do it right now, AND meltdown won\'t help.',
    phrase_2_action: 'Validate the struggle. Remove the task from sight. Break state.',
    phrase_3: 'We\'re stopping. Take a break. We\'ll try different later.',
    phrase_3_action: 'Walk away from task. Offer water or movement. Come back later or modify.',
    neurological_tip: 'DISTRACTED kids hit "impossible wall" when executive function fails. Pushing through = worse meltdown. Stopping = preserves confidence. Modify task or try when regulated.',
    profile: 'DISTRACTED',
    tags: ['tantrum', 'frustration', 'too hard', 'giving up', 'overwhelm', 'adhd'],
    situation_trigger: 'When child is having tantrum because task feels too hard and impossible',
    location_type: ['home', 'school'],
    time_optimal: ['anytime'],
    intensity_level: 'moderate',
    success_speed: '3min',
    parent_state: ['frustrated', 'calm', 'patient'],
    age_min: 4,
    age_max: 14,
    backup_plan: 'Say: "This isn\'t working today. Let\'s stop." Close the work. Do something completely different. Try again tomorrow or modify task.',
    common_mistakes: ['Forcing them to finish (creates learned helplessness)', 'Saying "it\'s easy" (invalidates real struggle)', 'No break allowed (meltdown gets worse)', 'Punishment for meltdown (it\'s overwhelm response)'],
    pause_after_phrase_1: 3,
    pause_after_phrase_2: 2,
    expected_time_seconds: 180,
    requires_preparation: false,
    works_in_public: false,
    emergency_suitable: false
  },
  {
    title: 'Tantrum Over Unexpected Change',
    category: 'Tantrums',
    wrong_way: '"Things CHANGE! You need to be more flexible! Stop crying!"',
    phrase_1: 'Plan changed, you\'re upset.',
    phrase_1_action: 'Acknowledge the emotional response. Don\'t minimize. Sit near them.',
    phrase_2: 'You were ready for the old plan, AND now it\'s different.',
    phrase_2_action: 'State what\'s happening simply. Don\'t over-explain why.',
    phrase_3: 'Be mad for one minute. Then we do new plan.',
    phrase_3_action: 'Set timer for 60 seconds. Let them cry. At timer: "Time to try new plan."',
    neurological_tip: 'DISTRACTED brains rely on predictability - working memory loaded the first plan. Sudden change = cognitive overload. Permission to be upset + time limit = processes emotion.',
    profile: 'DISTRACTED',
    tags: ['tantrum', 'change', 'unexpected', 'flexibility', 'transition', 'adhd'],
    situation_trigger: 'When unexpected change in plans triggers tantrum/meltdown',
    location_type: ['home', 'car', 'anytime'],
    time_optimal: ['anytime'],
    intensity_level: 'moderate',
    success_speed: '2min',
    parent_state: ['stressed', 'rushed', 'calm'],
    age_min: 4,
    age_max: 12,
    backup_plan: 'Let them be upset longer if needed. Say: "I know this is hard. Change is hard for you. We still have to do it." Validate + boundary.',
    common_mistakes: ['Expecting immediate flexibility (cognitively impossible)', 'No time to process emotion (gets stuck)', 'Over-explaining reasons for change (too much input)', 'Punishment for upset (it\'s neurological response)'],
    pause_after_phrase_1: 3,
    pause_after_phrase_2: 2,
    expected_time_seconds: 120,
    requires_preparation: false,
    works_in_public: true,
    emergency_suitable: false
  },

  // ========== TRANSITIONS (need 2 more) ==========
  {
    title: 'Leaving House Everything Forgotten',
    category: 'Transitions',
    wrong_way: '"We\'re LEAVING! Why don\'t you have your shoes?! Where\'s your coat?! Come ON!"',
    phrase_1: 'Too many things to remember.',
    phrase_1_action: 'Stop rushing. Stand at door. Point to checklist if you have one.',
    phrase_2: 'You need shoes AND coat AND bag, AND brain can\'t hold it all.',
    phrase_2_action: 'Do one thing at a time. "Shoes first. Put them on."',
    phrase_3: 'Shoes, then coat, then bag. I\'ll tell you each one.',
    phrase_3_action: 'Guide through each item sequentially. Don\'t list them all. One. Then next.',
    neurological_tip: 'Working memory cannot hold "get ready to leave" multi-step sequence. Parent must BE the checklist. Sequential > simultaneous. Every. Single. Time.',
    profile: 'DISTRACTED',
    tags: ['transitions', 'leaving', 'forgetting', 'working memory', 'getting ready', 'adhd'],
    situation_trigger: 'When trying to leave house and child forgot multiple items needed to go',
    location_type: ['home', 'door'],
    time_optimal: ['morning', 'anytime'],
    intensity_level: 'moderate',
    success_speed: '2min',
    parent_state: ['rushed', 'frustrated', 'patient'],
    age_min: 4,
    age_max: 14,
    backup_plan: 'Put all leave items in basket at door night before. Morning = grab basket. Everything in one place = one thing to remember instead of five.',
    common_mistakes: ['Yelling list from other room (won\'t remember)', 'Expecting them to self-check (no internal checklist)', 'Getting angry about forgetting (it\'s every time)', 'Not creating external system (verbal won\'t stick)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 2,
    expected_time_seconds: 120,
    requires_preparation: true,
    works_in_public: false,
    emergency_suitable: false
  },
  {
    title: 'Transition Shutdown Mid-Activity',
    category: 'Transitions',
    wrong_way: '"We talked about this! Time to go! MOVE! We\'re going to be late!"',
    phrase_1: 'Brain is stuck in this activity.',
    phrase_1_action: 'Stop rushing. Get close. Make eye contact. Acknowledge stuck-ness.',
    phrase_2: 'You\'re not ready to switch, AND switching is happening now.',
    phrase_2_action: 'Give 10-second warning. "Ten seconds to finish this part."',
    phrase_3: 'Stop at zero. Leave it here. We\'re going now.',
    phrase_3_action: 'Count to 10. At zero: physically guide them away. Firm but gentle.',
    neurological_tip: 'DISTRACTED kids have poor task-switching - brain needs transition time. 10-second countdown = external cue to shift. Physical guidance = when executive function can\'t initiate.',
    profile: 'DISTRACTED',
    tags: ['transitions', 'switching activities', 'stuck', 'task switching', 'leaving', 'adhd'],
    situation_trigger: 'When child is stuck in current activity and cannot transition to next thing',
    location_type: ['home', 'school', 'anytime'],
    time_optimal: ['anytime'],
    intensity_level: 'moderate',
    success_speed: '30sec',
    parent_state: ['rushed', 'frustrated', 'calm'],
    age_min: 4,
    age_max: 14,
    backup_plan: 'Physically move them. Hand on back, guide to next location. Say: "Body is moving, brain will catch up." Sometimes physical shift unsticks brain.',
    common_mistakes: ['Expecting verbal warning to work (it won\'t)', 'Waiting for them to self-initiate (they can\'t)', 'Getting angry at "not listening" (it\'s task-switching deficit)', 'No countdown (brain needs external cue)'],
    pause_after_phrase_1: 2,
    pause_after_phrase_2: 2,
    expected_time_seconds: 30,
    requires_preparation: false,
    works_in_public: true,
    emergency_suitable: true
  }
];

async function insertDistractedScripts() {
  console.log(' Inserting 30 DISTRACTED scripts to complete the matrix...\n');

  let successCount = 0;
  let errorCount = 0;

  for (let i = 0; i < distractedScripts.length; i++) {
    const script = distractedScripts[i];
    console.log(`[${i+1}/30] ${script.category}: ${script.title}`);

    const { data, error } = await supabase
      .from('scripts')
      .insert([script])
      .select();

    if (error) {
      console.log(`    Error: ${error.message}`);
      errorCount++;
    } else {
      console.log(`    Inserted!`);
      successCount++;
    }
  }

  console.log('\n');
  console.log(' RESULTS:');
  console.log(`    Success: ${successCount} scripts`);
  console.log(`    Errors: ${errorCount} scripts`);
  console.log('\n');

  // Check distribution by category
  console.log(' DISTRACTED SCRIPTS BY CATEGORY:\n');
  const categories = {};
  distractedScripts.forEach(s => {
    categories[s.category] = (categories[s.category] || 0) + 1;
  });

  Object.keys(categories).sort().forEach(cat => {
    console.log(`   ${cat}: ${categories[cat]} scripts`);
  });

  // Check total in database
  console.log('\n TOTAL IN DATABASE:\n');
  const { data: stats, error: statsError } = await supabase
    .from('scripts')
    .select('profile, category')
    .eq('profile', 'DISTRACTED');

  if (!statsError && stats) {
    const categoryCount = {};
    stats.forEach(s => {
      categoryCount[s.category] = (categoryCount[s.category] || 0) + 1;
    });

    console.log(`   Total DISTRACTED scripts: ${stats.length}\n`);
    console.log('   By category:');
    Object.keys(categoryCount).sort().forEach(cat => {
      const needed = 4;
      const have = categoryCount[cat];
      const status = have >= needed ? '' : '';
      console.log(`   ${status} ${cat}: ${have}/${needed}`);
    });
  }

  console.log('\n COMPLETE! All 30 DISTRACTED scripts created!\n');
}

insertDistractedScripts();
